# KnowledgeField

Описание библиотеки KnowledgeField (текущая поддиректория с файлами - `src/libs/KnowledgeField`).

Данная библиотека предназначена для представления фрагмента ПЗ с помощью классов `C++`.

## Внутреннее устройство

Библиотека состоит из одного .h файла и одного .cpp файла.

Библиотека состоит из класса, соответствующего фрагменту ПЗ (`knowledge_field_t`).
Данный класс позволяет представить фрагмент ПЗ в виде текста:
* метод `to_string` строит представление на ЯПЗ;
* метод `to_xml` строит представление в формате xml;
* метод `dump` возвращает строку с дампом класса, из которой можно построить новый объект класса `knowledge_field_t`.
Для загрузки из дампа используется метод `load`. Данный метод принимает в качестве аргумента или строку с дампом или поток класса `istream`.

Для добавления типа или значения типа используются методы `add_type` и `add_type_value`.
Также существуют методы для добавления различных сущностей: `add_object`, `add_rule`, `add_event`, `add_interval`.

Библиотека содержит классы соответствующие объектам(`temporal_object_t`), событиям(`temporal_event_t`), интервалам(`temporal_interval_t`), правилам(`termporal_rule_t`).

Для добавления атрибутов в объект используется метод `add_attr` у класса `knowledge_field_t`.
Для добавления условий возникновения событий, условий правил используется метод `add_condition`.
Для добавления условий открытия/закрытия интервалов исползуются методы `set_start_condition`, `set_end_condition`.
Для добавления заключений правил используется метод `add_action`.

## Ограничения на доступные типы условий

* `condition_interval_duration_t` - условие типа ИНТЕРВАЛ.ДЛИТЕЛЬНОСТЬ op ЗНАЧЕНИЕ
* `condition_sum_equal_const_t` - условие типа ОБЪЕКТ.АТРИБУТ + ОБЪЕКТ.АТРИБУТ + ... + ОБЪЕКТ.АТРИБУТ = ЗНАЧЕНИЕ
* `condition_attr_value_const_t` - условие типа ОБЪЕКТ.АТРИБУТ op ЗНАЧЕНИЕ
* `condition_attr_value_attr_value_t` - условие типа ОБЪЕКТ.АТРИБУТ op ОБЪЕКТ.АТРИБУТ
* `event_interval_condition_t` - условия типа СОБЫТИЕ op ИНТЕРВАЛ
* `event_event_condition_t` - условие типа СОБЫТИЕ op СОБЫТИЕ
* `complex_condition_t` - условие типа (condition_t) op (condition) op ... op (condition)
* `true_condition_t` - тождественно истинное условие

## Ограничения на доступные типы заключений правил

* `action_int_t` - заключение вида ОБЪЕКТ.АТРИБУТ = ЧИСЛО
* `action_string_t` - заключение вида ОБЪЕКТ.АТРИБУТ = СТРОКА
* `complex_action_t` - заключение вида (action_t) & (action_t) & ... & (action_t)
